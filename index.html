<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Build &amp; Deploy ML models in Cloud">
<meta name="author" content="Amit Kapoor">

<title>Machine Learning Cloud | Amit Kapoor</title>
<link rel="stylesheet" href="static/style.css" />
<link rel="stylesheet" href="static/tomorrow-night.css" />

<header>
  <p><a href="/datascience">home</a> | 
     <a href="http://amitkaps.com"> amitkaps.com </a> |
     <a href="http://bargava.com"> bargava.com </a>
  </p>
</header>
    
<main>    
</main>
    
<!-- <script src="js/vega.min.js"></script>
<script src="js/vega-lite.min.js"></script>
<script src="js/vega-embed.min.js"></script> 
<script src="static/yaml.min.js"></script>-->
<script src="static/marked.min.js"></script>
<script src="static/highlight.pack.js"></script>
<script>

window.onload = function () {

  const output = document.querySelector("main");  
  const marked = window.marked;
  const renderer = new marked.Renderer();

  // Synchronous highlighting with highlight.js
  // marked.setOptions({
  //   highlight: function (code) {
  //     return hljs.highlightAuto(code).textContent;
  //   }
  // });
  
  const specs = [];
	opts = {  
          "mode": "vega-lite",
          "renderer": "svg",
          "actions": {export: false, source: false, editor: false}
        };
  
  marked.setOptions({
    renderer: new marked.Renderer(),
    headerPrefix: false
  })

  // vegaliteRender = function () {
  //   let specs = document.getElementsByClassName('lang-vis')
	// 	let num = specs.length;
	// 	for (var i=0; i < num; i++) {
  //     el = "#vis-" + i;
  //     jsonVis = YAML.parse(specs[i].textContent);
  //     console.log(vl.compile(jsonVis).spec == undefined)
  //     htmlString = "<div id='vis-" + i + "'></div>"
  //     specs[i].parentNode.insertAdjacentHTML('afterend', htmlString);
  //     specs[i].style.display = 'none';
  //     vega.embed(el, jsonVis, opts);
  //   };
  // };
  
 
  getNotebook = function () {
    let hash = window.location.hash
    let file = hash.replace("#", "");
    let fileName = file == "" ? "notebook.md" : file + ".md";
    let fileUrl = fileName;

    fetch(fileUrl).then(data => data.text()).then(data => {
      output.innerHTML = marked(data)
      hljs.initHighlightingOnLoad();
      // vegaliteRender();
    });
  }


  window.onhashchange = function () {getNotebook();}
  getNotebook();  

}



</script>